;(function($){$.fn.friendlyAccordion=function(c){var d={containerWidth:960,containerHeight:320,headerWidth:48,firstSlide:1,onActivate:function(){},slideSpeed:800,slideCallback:function(){},autoPlay:false,cycleSpeed:6000,theme:'basic',rounded:false,enumerateSlides:false},settings=$.extend({},d,c),$accordion=this,$slides=$accordion.find('li'),slideLen=$slides.length,slideWidth=settings.containerWidth-(slideLen*settings.headerWidth),$header=$slides.children('h2'),playing,utils={getGroup:function(a,b){if(this.offsetLeft===a.left){return $header.slice(b+1,slideLen).filter(function(){return this.offsetLeft===$header.index(this)*settings.headerWidth})}else if(this.offsetLeft===a.right){return $header.slice(0,b+1).filter(function(){return this.offsetLeft===slideWidth+($header.index(this)*settings.headerWidth)})}},nextSlide:function(){var b=settings.firstSlide;return function(a){if(a&&typeof a==='number'){b=a}return b++%slideLen}},play:function(a){var b=utils.nextSlide(),start=function(){$header.eq(b(a)).click()};playing=setInterval(start,settings.cycleSpeed)},pause:function(){clearInterval(playing)}};$accordion.height(settings.containerHeight).width(settings.containerWidth).addClass(settings.theme).addClass(settings.rounded&&'rounded');$header.width(settings.containerHeight).height(settings.headerWidth).eq(settings.firstSlide-1).addClass('selected');$header.each(function(a){var b=$(this),left=a*settings.headerWidth;if(a>=settings.firstSlide){left+=slideWidth}b.css('left',left).next().width(slideWidth).css({left:left,paddingLeft:settings.headerWidth});settings.enumerateSlides&&b.append('<b>'+(a+1)+'</b>')});$header.click(function(e){var a=$(this),index=$header.index(a),pos={left:index*settings.headerWidth,right:index*settings.headerWidth+slideWidth},newPos,$group=utils.getGroup.call(this,pos,index);if(playing&&e.originalEvent){utils.pause()}settings.onActivate.call($slides.eq(index));if(this.offsetLeft===pos.left){newPos=slideWidth}else if(this.offsetLeft===pos.right){newPos=-slideWidth}if(!$header.is(':animated')){$header.removeClass('selected').filter(a).addClass('selected');$group.add($group.next()).animate({left:'+='+newPos},settings.slideSpeed,function(){return settings.slideCallback.call($slides.eq(index))})}});settings.autoPlay&&utils.play();return $accordion}})(jQuery);